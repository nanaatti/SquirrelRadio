<!DOCTYPE html>
<html>

<head>
    <title>JWPlayer Audio Playlist</title>
    <script src="https://content.jwplatform.com/libraries/QA8aoWzd.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

<div id="audioPlayer"></div>
<div id="playlistSelection">
    <button type="button" onclick="loadPlaylist('playlist.json')">All</button>
    <button type="button" onclick="loadPlaylist('custom.json')">Custom</button>
</div>
<div id="songList">Playlist:</div>
<div id="nowPlaying"></div>

<script type="text/javascript">

var playerInstance = jwplayer("audioPlayer");
playerInstance.setup({
    width: 640,
	height: 40,
    repeat: false,
    autostart: false,
    playlist: "playlist.json"
});

loadPlaylist('playlist.json');
    
jwplayer("audioPlayer").on('play', function(){
    var audio = jwplayer().getPlaylistItem();
    document.getElementById("nowPlaying").innerHTML = "Now Playing: " + audio.title + " | " + audio.duration + "<br> <img src=\"" + audio.poster + "\" style=\"width:200px;height:200px;\">";
});
    
jwplayer("audioPlayer").on('complete', function(){
    document.getElementById("nowPlaying").innerHTML = "";
});

function loadPlaylist(name){
    playerInstance.load(name);
    clearList();
    document.getElementById("nowPlaying").innerHTML = "";

    $.getJSON(name)
    .done(function(data) {
        for (i = 0; i < data.playlist.length; i++) {
            document.getElementById("songList").innerHTML += "</br>" + data.playlist[i].mediaid + " | " + "<button type=\"button\" onclick=\"playSong(" + data.playlist[i].mediaid + ")\">" + data.playlist[i].title + "</button>" + " | " + data.playlist[i].duration;
        }
    })
    .fail(function() {
        console.log( "error" );
    });
}

function playSong(x) {
    jwplayer().playlistItem(x-1);
}

function clearList(){
    document.getElementById("songList").innerHTML = "Playlist:";
}

</script>
    
</body>
    
</html>